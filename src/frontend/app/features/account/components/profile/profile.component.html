<div class="profile-container">
  <div class="profile-header">
    <h1>Profile</h1>
    <button class="address-button" (click)="navigateToAddressForm()" *ngIf="!isLoading && addresses !== undefined">
      {{ (addresses && addresses.length > 0) ? 'Update Address' : 'Add Address' }}
    </button>
  </div>

  <div class="loading" *ngIf="isLoading">Loading...</div>
  
  <div class="error-message" *ngIf="error">{{ error }}</div>

  <div class="profile-content" *ngIf="!isLoading && !error">
    <section class="user-info">
      <h2>Personal Information</h2>
      <div class="info-grid">
        <div class="info-item">
          <label>Username:</label>
          <span>{{ user?.username ?? 'Not provided' }}</span>
        </div>
        <div class="info-item">
          <label>Name:</label>
          <span>{{ (user?.first_name || '') + ' ' + (user?.last_name || '') || 'Not provided' }}</span>
        </div>
        <div class="info-item">
          <label>Email:</label>
          <span>{{ user?.email ?? 'Not provided' }}</span>
        </div>
        <div class="info-item">
          <label>Phone:</label>
          <span>{{ user?.phone ?? 'Not provided' }}</span>
        </div>
        <div class="info-item">
          <label>CPF:</label>
          <span>{{ user?.cpf ?? 'Not provided' }}</span>
        </div>
        <div class="info-item">
          <label>Birth Date:</label>
          <span>{{ user?.birth_date ?? 'Not provided' }}</span>
        </div>
        <div class="info-item">
          <label>Passport Number:</label>
          <span>{{ user?.passport_number ?? 'Not provided' }}</span>
        </div>
      </div>
    </section>

    <section class="address-info">
      <h2>Addresses</h2>

      <div class="address-list" *ngIf="addresses && addresses.length > 0">
        <div class="address-card" *ngFor="let address of addresses">
          <p><strong>Street:</strong> {{ address.street }}</p>
          <p><strong>Neighborhood:</strong> {{ address.neighborhood }}</p>
          <p><strong>City/State:</strong> {{ address.city }}, {{ address.state }}</p>
          <p><strong>Country:</strong> {{ address.country }}</p>
          <p><strong>ZIP:</strong> {{ address.zip_code }}</p>
        </div>
      </div>
      <p class="no-address" *ngIf="addresses && addresses.length === 0">
        No addresses found. Click the button above to add one.
      </p>
    </section>
  </div>
</div> 
